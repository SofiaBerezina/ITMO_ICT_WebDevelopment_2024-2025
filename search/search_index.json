{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"\u041b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430 \u2116 4","text":"<ol> <li>\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0438 \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u043c\u043e\u0434\u0435\u043b\u044c \u0411\u0414 (\u0432\u0430\u0440\u0438\u0430\u043d\u0442 12)</li> </ol> <p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u043d\u0443\u044e \u0441\u0438\u0441\u0442\u0435\u043c\u0443, \u043f\u0440\u0435\u0434\u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u043d\u0443\u044e \u0434\u043b\u044f \u0443\u0447\u0435\u0431\u043d\u043e\u0439 \u0447\u0430\u0441\u0442\u0438 \u043a\u043e\u043b\u043b\u0435\u0434\u0436\u0430. \u041e\u043d\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0442\u044c \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u0441\u0432\u0435\u0434\u0435\u043d\u0438\u0439 \u043e \u043a\u0430\u0436\u0434\u043e\u043c \u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0435, \u043e \u0434\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u0430\u0445, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043e\u043d \u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0435\u0442, \u043d\u043e\u043c\u0435\u0440\u0435 \u0437\u0430\u043a\u0440\u0435\u043f\u043b\u0435\u043d\u043d\u043e\u0433\u043e \u0437\u0430 \u043d\u0438\u043c \u043a\u0430\u0431\u0438\u043d\u0435\u0442\u0430, \u043e \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0438 \u0437\u0430\u043d\u044f\u0442\u0438\u0439. \u0421\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0442 \u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0435 \u0438\u043c\u0435\u044e\u0442 \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u043a\u0430\u0431\u0438\u043d\u0435\u0442\u0430.     \u041e \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430\u0445 \u0434\u043e\u043b\u0436\u043d\u044b \u0445\u0440\u0430\u043d\u0438\u0442\u044c\u0441\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0441\u0432\u0435\u0434\u0435\u043d\u0438\u044f: \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u0438 \u0438\u043c\u044f, \u0432 \u043a\u0430\u043a\u043e\u0439 \u0433\u0440\u0443\u043f\u043f\u0435 \u0443\u0447\u0438\u0442\u0441\u044f, \u043a\u0430\u043a\u0443\u044e \u043e\u0446\u0435\u043d\u043a\u0443 \u0438\u043c\u0435\u0435\u0442 \u0432 \u0442\u0435\u043a\u0443\u0449\u0435\u043c \u0441\u0435\u043c\u0435\u0441\u0442\u0440\u0435 \u043f\u043e \u043a\u0430\u0436\u0434\u043e\u0439 \u0434\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u0435. \u0417\u0430\u043c\u0434\u0435\u043a\u0430\u043d\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0438\u043c\u0435\u0442\u044c \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0432\u0435\u0434\u0435\u043d\u0438\u044f \u043e \u043d\u043e\u0432\u043e\u043c \u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0435 \u0438\u043b\u0438 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0435, \u0432\u043d\u0435\u0441\u0442\u0438 \u0432 \u0431\u0430\u0437\u0443 \u0434\u0430\u043d\u043d\u044b\u0445 \u0441\u0435\u043c\u0435\u0441\u0442\u0440\u043e\u0432\u044b\u0435 \u043e\u0446\u0435\u043d\u043a\u0438 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432 \u043a\u0430\u0436\u0434\u043e\u0439 \u0433\u0440\u0443\u043f\u043f\u044b \u043f\u043e \u043a\u0430\u0436\u0434\u043e\u0439 \u0434\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u0435, \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u043e\u0431 \u0443\u0432\u043e\u043b\u0438\u0432\u0448\u0435\u043c\u0441\u044f \u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0435 \u0438 \u043e\u0442\u0447\u0438\u0441\u043b\u0435\u043d\u043d\u043e\u043c \u0438\u0437 \u043a\u043e\u043b\u043b\u0435\u0434\u0436\u0430 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0435, \u0432\u043d\u0435\u0441\u0442\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0432 \u0434\u0430\u043d\u043d\u044b\u0435 \u043e\u0431 \u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u044f\u0445 \u0438 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430\u0445, \u0432 \u0442\u043e\u043c \u0447\u0438\u0441\u043b\u0435 \u043f\u043e\u043c\u0435\u043d\u044f\u0442\u044c \u043e\u0446\u0435\u043d\u043a\u0443 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430 \u043f\u043e \u0442\u043e\u0439 \u0438\u043b\u0438 \u0438\u043d\u043e\u0439 \u0434\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u0435. \u0412 \u0437\u0430\u0434\u0430\u0447\u0443 \u0434\u0438\u0441\u043f\u0435\u0442\u0447\u0435\u0440\u0430 \u0443\u0447\u0435\u0431\u043d\u043e\u0439 \u0447\u0430\u0441\u0442\u0438 \u0432\u0445\u043e\u0434\u0438\u0442 \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f.</p> <p></p> <ol> <li>\u0421\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u0430\u0442\u043e\u0440\u044b</li> </ol> <pre><code># serializers.py - \u0418\u0421\u041f\u0420\u0410\u0412\u041b\u0415\u041d\u041d\u0410\u042f \u0412\u0415\u0420\u0421\u0418\u042f\nfrom rest_framework import serializers\nfrom django.contrib.auth.models import User\nfrom .models import (\n    ClassRoom, Teacher, Group, Student,\n    Subject, Schedule, Grade\n)\n\n\nclass ClassRoomSerializer(serializers.ModelSerializer):\n    class Meta:\n        model = ClassRoom\n        fields = '__all__'\n\n\nclass TeacherSerializer(serializers.ModelSerializer):\n    classroom_display = serializers.CharField(\n        source='classroom.room_number',\n        read_only=True\n    )\n    position_display = serializers.CharField(\n        source='get_position_display',\n        read_only=True\n    )\n\n    class Meta:\n        model = Teacher\n        fields = [\n            'id', 'surname', 'name', 'middle_name',\n            'position', 'position_display', 'classroom', 'classroom_display',\n            'is_active', 'user_account'\n        ]\n\n\nclass GroupSerializer(serializers.ModelSerializer):\n    curator_name = serializers.CharField(\n        source='curator.__str__',\n        read_only=True\n    )\n    course_display = serializers.CharField(\n        source='get_course_display',\n        read_only=True\n    )\n\n    class Meta:\n        model = Group\n        fields = [\n            'id', 'name', 'course', 'course_display',\n            'specialty', 'curator', 'curator_name',\n            'created_year'\n        ]\n\n\nclass StudentSerializer(serializers.ModelSerializer):\n    group_name = serializers.CharField(\n        source='group.name',\n        read_only=True\n    )\n    status_display = serializers.CharField(\n        source='get_status_display',\n        read_only=True\n    )\n    full_name = serializers.CharField(\n        source='get_full_name',\n        read_only=True\n    )\n\n    class Meta:\n        model = Student\n        fields = [\n            'id', 'surname', 'name', 'middle_name', 'full_name',\n            'group', 'group_name', 'enrollment_date',\n            'status', 'status_display', 'user_account'\n        ]\n\n\nclass SubjectSerializer(serializers.ModelSerializer):\n    semester_display = serializers.CharField(\n        source='get_semester_display',\n        read_only=True\n    )\n\n    class Meta:\n        model = Subject\n        fields = '__all__'\n\n\nclass SimpleScheduleSerializer(serializers.ModelSerializer):\n    day_display = serializers.CharField(\n        source='get_day_of_week_display',\n        read_only=True\n    )\n    group_name = serializers.CharField(\n        source='group.name',\n        read_only=True\n    )\n    subject_name = serializers.CharField(\n        source='subject.name',\n        read_only=True\n    )\n    teacher_name = serializers.CharField(\n        source='teacher.__str__',\n        read_only=True\n    )\n    classroom_number = serializers.CharField(\n        source='classroom.room_number',\n        read_only=True\n    )\n    lesson_type_display = serializers.CharField(\n        source='get_lesson_type_display',\n        read_only=True\n    )\n\n    class Meta:\n        model = Schedule\n        fields = [\n            'id', 'day_of_week', 'day_display',\n            'lesson_number', 'group', 'group_name',\n            'subject', 'subject_name', 'teacher', 'teacher_name',\n            'classroom', 'classroom_number', 'lesson_type', 'lesson_type_display',\n            'week_type', 'start_date', 'end_date'\n        ]\n\n\nclass GradeCreateSerializer(serializers.ModelSerializer):\n    \"\"\"\u0421\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u0430\u0442\u043e\u0440 \u0434\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043e\u0446\u0435\u043d\u043e\u043a\"\"\"\n\n    def validate_grade(self, value):\n        \"\"\"\u0412\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u044f \u043e\u0446\u0435\u043d\u043a\u0438\"\"\"\n        if value not in [2, 3, 4, 5]:\n            raise serializers.ValidationError(\"\u041e\u0446\u0435\u043d\u043a\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c 2, 3, 4 \u0438\u043b\u0438 5\")\n        return value\n\n    class Meta:\n        model = Grade\n        fields = [\n            'student', 'subject', 'grade', 'grade_type',\n            'semester', 'date', 'teacher', 'comments'\n        ]\n        # \u0423\u0411\u0420\u0410\u0422\u042c min_value \u0438 max_value \u0438\u0437 extra_kwargs\n        extra_kwargs = {\n            'grade': {'required': True},\n            'subject': {'required': True},\n            'student': {'required': True},\n            'semester': {'required': True},\n            'date': {'required': True},\n        }\n\n\nclass GradeListSerializer(serializers.ModelSerializer):\n    \"\"\"\u0421\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u0430\u0442\u043e\u0440 \u0442\u043e\u043b\u044c\u043a\u043e \u0434\u043b\u044f \u0447\u0442\u0435\u043d\u0438\u044f (\u0441\u043f\u0438\u0441\u043e\u043a \u043e\u0446\u0435\u043d\u043e\u043a)\"\"\"\n    student_name = serializers.CharField(source='student.get_full_name')\n    subject_name = serializers.CharField(source='subject.name')\n    teacher_name = serializers.CharField(source='teacher.__str__')\n    grade_display = serializers.CharField(source='get_grade_display')\n    grade_type_display = serializers.CharField(source='get_grade_type_display')\n\n    class Meta:\n        model = Grade\n        fields = [\n            'id', 'student_name', 'subject_name',\n            'grade', 'grade_display', 'grade_type', 'grade_type_display',\n            'semester', 'date', 'teacher_name', 'comments'\n        ]\n\n\nclass GradeUpdateSerializer(serializers.ModelSerializer):\n    \"\"\"\u0421\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u0430\u0442\u043e\u0440 \u0434\u043b\u044f \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u043e\u0446\u0435\u043d\u043e\u043a\"\"\"\n\n    def validate_grade(self, value):\n        if value not in [2, 3, 4, 5]:\n            raise serializers.ValidationError(\"\u041e\u0446\u0435\u043d\u043a\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c 2, 3, 4 \u0438\u043b\u0438 5\")\n        return value\n\n    class Meta:\n        model = Grade\n        fields = [\n            'grade', 'grade_type', 'semester',\n            'date', 'teacher', 'comments'\n        ]\n</code></pre> <ol> <li>URLS</li> </ol> <pre><code># urls.py\nfrom django.urls import path\nfrom rest_framework.authtoken.views import obtain_auth_token\nfrom . import views\n\nurlpatterns = [\n    # \u0410\u0443\u0442\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f\n    path('token/', obtain_auth_token, name='api_token_auth'),\n    path('me/', views.CurrentUserAPIView.as_view(), name='current-user'),\n\n    # 1. \u041a\u0430\u0431\u0438\u043d\u0435\u0442\u044b\n    path('classrooms/', views.ClassRoomListAPIView.as_view(), name='classrooms-list'),\n\n    # 2. \u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438\n    path('teachers/active/', views.ActiveTeachersAPIView.as_view(), name='active-teachers'),\n\n    # 3. \u0413\u0440\u0443\u043f\u043f\u044b\n    path('groups/course/&lt;int:course&gt;/', views.GroupsByCourseAPIView.as_view(), name='groups-by-course'),\n    path('groups/&lt;int:group_id&gt;/detail/', views.GroupDetailWithCuratorAPIView.as_view(), name='group-detail'),\n\n    # 4. \u0421\u0442\u0443\u0434\u0435\u043d\u0442\u044b\n    path('students/search/', views.StudentSearchAPIView.as_view(), name='student-search'),\n    path('groups/&lt;int:group_id&gt;/students/', views.StudentsByGroupAPIView.as_view(), name='students-by-group'),\n\n    # 5. \u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435\n    path('schedule/group/&lt;int:group_id&gt;/', views.GroupScheduleAPIView.as_view(), name='group-schedule'),\n    path('schedule/teacher/&lt;int:teacher_id&gt;/', views.TeacherScheduleAPIView.as_view(), name='teacher-schedule'),\n    path('schedule/day/&lt;int:day_of_week&gt;/', views.DailyScheduleAPIView.as_view(), name='daily-schedule'),\n\n    # 6. \u0414\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u044b\n    path('subjects/course/&lt;int:course&gt;/semester/&lt;int:semester&gt;/',\n         views.SubjectsByCourseSemesterAPIView.as_view(), name='subjects-by-course-semester'),\n\n    # 7. \u041e\u0446\u0435\u043d\u043a\u0438\n    path('students/&lt;int:student_id&gt;/grades/', views.StudentGradesAPIView.as_view(), name='student-grades'),\n    path('grades/create/', views.GradeCreateAPIView.as_view(), name='grade-create'),\n    path('grades/&lt;int:id&gt;/update/', views.GradeUpdateAPIView.as_view(), name='grade-update'),  # \u0418\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e\n]\n</code></pre> <ol> <li>\u042d\u043d\u0434\u043f\u043e\u0438\u043d\u0442\u044b</li> </ol> <pre><code># 1. \u042d\u043d\u0434\u043f\u043e\u0438\u043d\u0442: \u0421\u043f\u0438\u0441\u043e\u043a \u0432\u0441\u0435\u0445 \u043a\u0430\u0431\u0438\u043d\u0435\u0442\u043e\u0432\nclass ClassRoomListAPIView(generics.ListAPIView):\n    \"\"\"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0432\u0441\u0435\u0445 \u043a\u0430\u0431\u0438\u043d\u0435\u0442\u043e\u0432\"\"\"\n    queryset = ClassRoom.objects.all()\n    serializer_class = ClassRoomSerializer\n    permission_classes = [AllowAny]\n    filter_backends = [filters.SearchFilter]\n    search_fields = ['name', 'room_number']\n</code></pre> <pre><code># 2. \u042d\u043d\u0434\u043f\u043e\u0438\u043d\u0442: \u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0435 \u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438\nclass ActiveTeachersAPIView(generics.ListAPIView):\n    \"\"\"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0445 \u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0435\u0439\"\"\"\n    queryset = Teacher.objects.filter(is_active=True)\n    serializer_class = TeacherSerializer\n    permission_classes = [AllowAny]\n</code></pre> <pre><code># 3. \u042d\u043d\u0434\u043f\u043e\u0438\u043d\u0442: \u0413\u0440\u0443\u043f\u043f\u044b \u043f\u043e \u043a\u0443\u0440\u0441\u0443\nclass GroupsByCourseAPIView(APIView):\n    \"\"\"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u044b \u043f\u043e \u043d\u043e\u043c\u0435\u0440\u0443 \u043a\u0443\u0440\u0441\u0430\"\"\"\n    permission_classes = [AllowAny]\n\n    def get(self, request, course):\n        groups = Group.objects.filter(course=course)\n        serializer = GroupSerializer(groups, many=True)\n        return Response(serializer.data)\n</code></pre> <pre><code># 4. \u042d\u043d\u0434\u043f\u043e\u0438\u043d\u0442: \u0421\u0442\u0443\u0434\u0435\u043d\u0442\u044b \u0433\u0440\u0443\u043f\u043f\u044b\nclass StudentsByGroupAPIView(generics.ListAPIView):\n    \"\"\"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0439 \u0433\u0440\u0443\u043f\u043f\u044b\"\"\"\n    serializer_class = StudentSerializer\n    permission_classes = [AllowAny]\n\n    def get_queryset(self):\n        group_id = self.kwargs['group_id']\n        return Student.objects.filter(group_id=group_id, status='active')\n</code></pre> <pre><code># 5. \u042d\u043d\u0434\u043f\u043e\u0438\u043d\u0442: \u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0434\u043b\u044f \u0433\u0440\u0443\u043f\u043f\u044b\nclass GroupScheduleAPIView(generics.ListAPIView):\n    \"\"\"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0434\u043b\u044f \u0433\u0440\u0443\u043f\u043f\u044b\"\"\"\n    serializer_class = SimpleScheduleSerializer\n    permission_classes = [AllowAny]\n\n    def get_queryset(self):\n        group_id = self.kwargs['group_id']\n        return Schedule.objects.filter(group_id=group_id).order_by(\n            'day_of_week', 'lesson_number'\n        )\n</code></pre> <pre><code># 6. \u042d\u043d\u0434\u043f\u043e\u0438\u043d\u0442: \u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0434\u043b\u044f \u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u044f\nclass TeacherScheduleAPIView(generics.ListAPIView):\n    \"\"\"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0434\u043b\u044f \u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u044f\"\"\"\n    serializer_class = SimpleScheduleSerializer\n    permission_classes = [IsAuthenticated]\n\n    def get_queryset(self):\n        teacher_id = self.kwargs['teacher_id']\n        return Schedule.objects.filter(teacher_id=teacher_id).order_by(\n            'day_of_week', 'lesson_number'\n        )\n</code></pre> <pre><code># 7. \u042d\u043d\u0434\u043f\u043e\u0438\u043d\u0442: \u041e\u0446\u0435\u043d\u043a\u0438 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430\nclass StudentGradesAPIView(generics.ListAPIView):\n    \"\"\"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043e\u0446\u0435\u043d\u043a\u0438 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430\"\"\"\n    serializer_class = GradeListSerializer\n    permission_classes = [IsAuthenticated]\n\n    def get_queryset(self):\n        student_id = self.kwargs['student_id']\n        return Grade.objects.filter(student_id=student_id)\n</code></pre> <pre><code># 8. \u042d\u043d\u0434\u043f\u043e\u0438\u043d\u0442: \u0414\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u044b \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u0438 \u0441\u0435\u043c\u0435\u0441\u0442\u0440\u0443\nclass SubjectsByCourseSemesterAPIView(APIView):\n    \"\"\"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u044b \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u0438 \u0441\u0435\u043c\u0435\u0441\u0442\u0440\u0443\"\"\"\n    permission_classes = [AllowAny]\n\n    def get(self, request, course, semester):\n        subjects = Subject.objects.filter(course=course, semester=semester)\n        serializer = SubjectSerializer(subjects, many=True)\n        return Response(serializer.data)\n</code></pre> <pre><code># 9. \u042d\u043d\u0434\u043f\u043e\u0438\u043d\u0442: \u041f\u043e\u0438\u0441\u043a \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432\nclass StudentSearchAPIView(generics.ListAPIView):\n    \"\"\"\u041f\u043e\u0438\u0441\u043a \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432 \u043f\u043e \u0438\u043c\u0435\u043d\u0438/\u0444\u0430\u043c\u0438\u043b\u0438\u0438\"\"\"\n    serializer_class = StudentSerializer\n    filter_backends = [filters.SearchFilter]\n    search_fields = ['surname', 'name', 'middle_name']\n    permission_classes = [AllowAny]\n\n    def get_queryset(self):\n        return Student.objects.filter(status='active')\n</code></pre> <pre><code># 10. \u042d\u043d\u0434\u043f\u043e\u0438\u043d\u0442: \u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043d\u0430 \u0434\u0435\u043d\u044c\nclass DailyScheduleAPIView(APIView):\n    \"\"\"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043d\u0430 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0439 \u0434\u0435\u043d\u044c \u043d\u0435\u0434\u0435\u043b\u0438\"\"\"\n    permission_classes = [AllowAny]\n\n    def get(self, request, day_of_week):\n        schedules = Schedule.objects.filter(day_of_week=day_of_week)\n        serializer = SimpleScheduleSerializer(schedules, many=True)\n        return Response(serializer.data)\n</code></pre> <pre><code># 11. \u042d\u043d\u0434\u043f\u043e\u0438\u043d\u0442: \u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0433\u0440\u0443\u043f\u043f\u0435 \u0441 \u043a\u0443\u0440\u0430\u0442\u043e\u0440\u043e\u043c\nclass GroupDetailWithCuratorAPIView(APIView):\n    \"\"\"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u0435\u0442\u0430\u043b\u044c\u043d\u0443\u044e \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u0433\u0440\u0443\u043f\u043f\u0435 \u0441 \u043a\u0443\u0440\u0430\u0442\u043e\u0440\u043e\u043c\"\"\"\n    permission_classes = [AllowAny]\n\n    def get(self, request, group_id):\n        group = get_object_or_404(Group, id=group_id)\n        group_serializer = GroupSerializer(group)\n\n        response_data = group_serializer.data\n\n        if group.curator:\n            curator_serializer = TeacherSerializer(group.curator)\n            response_data['curator_details'] = curator_serializer.data\n\n        active_students = Student.objects.filter(\n            group=group,\n            status='active'\n        ).count()\n        response_data['active_students_count'] = active_students\n\n        return Response(response_data)\n</code></pre> <pre><code># 12. \u042d\u043d\u0434\u043f\u043e\u0438\u043d\u0442: \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043e\u0446\u0435\u043d\u043a\u0438\nclass GradeCreateAPIView(generics.CreateAPIView):\n    \"\"\"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u043e\u0446\u0435\u043d\u043a\u0443\"\"\"\n    queryset = Grade.objects.all()\n    serializer_class = GradeCreateSerializer\n    permission_classes = [IsAuthenticated]\n\n</code></pre> <pre><code># 13. \u042d\u043d\u0434\u043f\u043e\u0438\u043d\u0442: \u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043e\u0446\u0435\u043d\u043a\u0438\nclass GradeUpdateAPIView(generics.UpdateAPIView):\n    \"\"\"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u043e\u0446\u0435\u043d\u043a\u0443\"\"\"\n    queryset = Grade.objects.all()\n    serializer_class = GradeUpdateSerializer\n    permission_classes = [IsAuthenticated]\n    lookup_field = 'id'\n</code></pre>"},{"location":"practice/","title":"\u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430","text":""},{"location":"practice/#31","title":"\u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0447\u0430\u0441\u0442\u044c 3.1","text":"<p><code>\u0417\u0430\u0434\u0430\u043d\u0438\u0435 \u2116 1:</code></p> <p>\u0412\u043e\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435\u0441\u044c \u043f\u0440\u043e\u0435\u043a\u0442\u043e\u043c \u0438\u0437 \u043f\u0440\u0430\u043a\u0442\u0438\u043a\u0438 2.1:</p> <p> \u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u0437\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 6-7 \u043d\u043e\u0432\u044b\u0445 \u0430\u0432\u0442\u043e\u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435\u0432 \u0438 5-6 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u0435\u0439, \u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u0430\u0432\u0442\u043e\u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0443 \u043d\u0430\u0437\u043d\u0430\u0447\u044c\u0442\u0435 \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u0435\u043d\u0438\u0435 \u0438 \u043e\u0442 1 \u0434\u043e 3 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u0435\u0439. \u0417\u0430\u0434\u0430\u043d\u0438\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u043b\u0438\u0431\u043e \u0432 \u0438\u043d\u0442\u0435\u0440\u0430\u043a\u0442\u0438\u0432\u043d\u043e\u043c \u0440\u0435\u0436\u0438\u043c\u0435 \u0438\u043d\u0442\u0435\u0440\u043f\u0440\u0435\u0442\u0430\u0442\u043e\u0440\u0430, \u043b\u0438\u0431\u043e \u0432 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e\u043c python-\u0444\u0430\u0439\u043b\u0435. \u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u043c \u0434\u043e\u043b\u0436\u043d\u044b \u0441\u0442\u0430\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u0438 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0445 \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432.  \u0415\u0441\u043b\u0438 \u0432\u044b \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442\u0435 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u0438 \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0443 \u0447\u0435\u0440\u0435\u0437 \u043c\u0435\u0442\u043e\u0434 .add(), \u043d\u0435 \u0437\u0430\u0431\u0443\u0434\u044c\u0442\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0442\u0430\u043a\u0436\u0435 \u0430\u0441\u0441\u043e\u0446\u0438\u0430\u0442\u0438\u0432\u043d\u0443\u044e \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u044c \u201c\u0432\u043b\u0430\u0434\u0435\u043d\u0438\u0435\u201d</p> <ol> <li>\u0421\u043e\u0437\u0434\u0430\u0435\u043c \u0411\u0414</li> </ol> <pre><code>from django.db import models\n\n# Create your models here.\nclass Car(models.Model):\n    number = models.CharField(max_length=15, unique=True)\n    model = models.CharField(max_length=20)\n    brand = models.CharField(max_length=20, )\n    color = models.CharField(max_length=30, null=True)\n\n    def __str__(self):\n        return f\"{self.brand} {self.model} ({self.number})\"\n\nclass Owner(models.Model):\n    second_name = models.CharField(max_length=30)\n    first_name = models.CharField(max_length=30)\n    birth_date = models.DateField(null=True)\n\n    def __str__(self):\n        return f\"{self.second_name} {self.first_name} {self.birth_date}\"\n\nclass OwnerShip(models.Model):\n    owner = models.ForeignKey(Owner, on_delete=models.CASCADE)\n    car = models.ForeignKey(Car, on_delete=models.CASCADE)\n    buy_date = models.DateField()\n    sale_date = models.DateField(null=True)\n\n    def __str__(self):\n        return f\"{self.owner} {self.car} {self.buy_date} {self.sale_date}\"\n\nclass License(models.Model):\n    owner = models.ForeignKey(Owner, on_delete=models.CASCADE)\n    number = models.CharField(max_length=10, unique=True)\n    type = models.CharField(max_length=10)\n    issue_date = models.DateField()\n\n    def __str__(self):\n        return f\"{self.owner} {self.number} {self.type} {self.issue_date}\"\n</code></pre> <ol> <li>\u0421\u043e\u0437\u0434\u0430\u0435\u043c \u0444\u0430\u0439\u043b \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u043c\u0438</li> </ol> <pre><code>import os\nimport django\nimport datetime\nfrom django.utils import timezone\n\n# \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 Django\nos.environ.setdefault('DJANGO_SETTINGS_MODULE', 'myproject.settings')\ndjango.setup()\n\nfrom myapp.models import Car, Owner, OwnerShip, License\n\n\ndef create_data():\n\n    # \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u0435\u0439\n    cars = [\n        Car(number=\"A123BC777\", model=\"Camry\", brand=\"Toyota\", color=\"Black\"),\n        Car(number=\"B456DE123\", model=\"X5\", brand=\"BMW\", color=\"White\"),\n        Car(number=\"C789FG456\", model=\"Civic\", brand=\"Honda\", color=\"Red\"),\n        Car(number=\"E321HI789\", model=\"Logan\", brand=\"Renault\", color=\"Blue\"),\n        Car(number=\"F654JK321\", model=\"Focus\", brand=\"Ford\", color=\"Gray\"),\n        Car(number=\"X987YZ654\", model=\"Solaris\", brand=\"Hyundai\", color=\"Silver\"),\n    ]\n\n    for car in cars:\n        car.save()\n\n    print(\"\u0421\u043e\u0437\u0434\u0430\u043d\u044b \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u0438:\")\n    for car in Car.objects.all():\n        print(f\"  - {car}\")\n\n    # \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435\u0432\n    owners = [\n        Owner(second_name=\"\u0418\u0432\u0430\u043d\u043e\u0432\", first_name=\"\u0418\u0432\u0430\u043d\", birth_date=datetime.date(1990, 5, 15)),\n        Owner(second_name=\"\u041f\u0435\u0442\u0440\u043e\u0432\", first_name=\"\u041f\u0435\u0442\u0440\", birth_date=datetime.date(1985, 8, 22)),\n        Owner(second_name=\"\u0421\u0438\u0434\u043e\u0440\u043e\u0432\u0430\", first_name=\"\u041c\u0430\u0440\u0438\u044f\", birth_date=datetime.date(1992, 3, 10)),\n        Owner(second_name=\"\u041a\u0443\u0437\u043d\u0435\u0446\u043e\u0432\", first_name=\"\u0410\u043b\u0435\u043a\u0441\u0435\u0439\", birth_date=datetime.date(1988, 11, 5)),\n        Owner(second_name=\"\u0421\u043c\u0438\u0440\u043d\u043e\u0432\", first_name=\"\u0414\u043c\u0438\u0442\u0440\u0438\u0439\", birth_date=datetime.date(1995, 7, 30)),\n        Owner(second_name=\"\u0412\u0430\u0441\u0438\u043b\u044c\u0435\u0432\", first_name=\"\u0421\u0435\u0440\u0433\u0435\u0439\", birth_date=datetime.date(1980, 12, 18)),\n        Owner(second_name=\"\u041d\u0438\u043a\u043e\u043b\u0430\u0435\u0432\u0430\", first_name=\"\u041e\u043b\u044c\u0433\u0430\", birth_date=datetime.date(1993, 9, 25)),\n    ]\n\n    for owner in owners:\n        owner.save()\n\n    print(\"\\n\u0421\u043e\u0437\u0434\u0430\u043d\u044b \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u044b:\")\n    for owner in Owner.objects.all():\n        print(f\"  - {owner}\")\n\n    # \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0445 \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u0435\u043d\u0438\u0439\n    licenses = [\n        License(owner=owners[0], number=\"77AA123456\", type=\"B\", issue_date=datetime.date(2010, 6, 1)),\n        License(owner=owners[1], number=\"77BB654321\", type=\"BC\", issue_date=datetime.date(2008, 3, 15)),\n        License(owner=owners[2], number=\"77CC789012\", type=\"B\", issue_date=datetime.date(2012, 9, 20)),\n        License(owner=owners[3], number=\"77DD345678\", type=\"BCD\", issue_date=datetime.date(2009, 1, 10)),\n        License(owner=owners[4], number=\"77EE901234\", type=\"B\", issue_date=datetime.date(2015, 7, 5)),\n        License(owner=owners[5], number=\"77FF567890\", type=\"BC\", issue_date=datetime.date(2005, 11, 30)),\n        License(owner=owners[6], number=\"77GG112233\", type=\"B\", issue_date=datetime.date(2018, 4, 12)),\n    ]\n\n    for license_obj in licenses:\n        license_obj.save()\n\n    print(\"\\n\u0421\u043e\u0437\u0434\u0430\u043d\u044b \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0435 \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u0435\u043d\u0438\u044f:\")\n    for license_obj in License.objects.all():\n        print(f\"  - {license_obj}\")\n\n    # \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043e\u0442\u043d\u043e\u0448\u0435\u043d\u0438\u0439 \u0432\u043b\u0430\u0434\u0435\u043d\u0438\u044f \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044f\u043c\u0438\n    ownerships = [\n        # \u0418\u0432\u0430\u043d\u043e\u0432 \u0432\u043b\u0430\u0434\u0435\u0435\u0442 2 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044f\u043c\u0438\n        OwnerShip(owner=owners[0], car=cars[0], buy_date=datetime.date(2020, 1, 10),\n                  sale_date=datetime.date(2023, 5, 20)),\n        OwnerShip(owner=owners[0], car=cars[1], buy_date=datetime.date(2023, 6, 1)),\n\n        # \u041f\u0435\u0442\u0440\u043e\u0432 \u0432\u043b\u0430\u0434\u0435\u0435\u0442 1 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u0435\u043c\n        OwnerShip(owner=owners[1], car=cars[2], buy_date=datetime.date(2021, 3, 15)),\n\n        # \u0421\u0438\u0434\u043e\u0440\u043e\u0432\u0430 \u0432\u043b\u0430\u0434\u0435\u0435\u0442 3 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044f\u043c\u0438\n        OwnerShip(owner=owners[2], car=cars[0], buy_date=datetime.date(2023, 5, 21)),\n        OwnerShip(owner=owners[2], car=cars[3], buy_date=datetime.date(2022, 8, 10)),\n        OwnerShip(owner=owners[2], car=cars[4], buy_date=datetime.date(2020, 12, 5),\n                  sale_date=datetime.date(2023, 2, 28)),\n\n        # \u041a\u0443\u0437\u043d\u0435\u0446\u043e\u0432 \u0432\u043b\u0430\u0434\u0435\u0435\u0442 2 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044f\u043c\u0438\n        OwnerShip(owner=owners[3], car=cars[4], buy_date=datetime.date(2023, 3, 1)),\n        OwnerShip(owner=owners[3], car=cars[5], buy_date=datetime.date(2021, 7, 20)),\n\n        # \u0421\u043c\u0438\u0440\u043d\u043e\u0432 \u0432\u043b\u0430\u0434\u0435\u0435\u0442 1 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u0435\u043c\n        OwnerShip(owner=owners[4], car=cars[1], buy_date=datetime.date(2019, 4, 10),\n                  sale_date=datetime.date(2023, 5, 31)),\n\n        # \u0412\u0430\u0441\u0438\u043b\u044c\u0435\u0432 \u0432\u043b\u0430\u0434\u0435\u0435\u0442 2 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044f\u043c\u0438\n        OwnerShip(owner=owners[5], car=cars[2], buy_date=datetime.date(2018, 6, 15),\n                  sale_date=datetime.date(2021, 2, 28)),\n        OwnerShip(owner=owners[5], car=cars[5], buy_date=datetime.date(2020, 9, 1),\n                  sale_date=datetime.date(2021, 6, 30)),\n\n        # \u041d\u0438\u043a\u043e\u043b\u0430\u0435\u0432\u0430 \u0432\u043b\u0430\u0434\u0435\u0435\u0442 1 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u0435\u043c\n        OwnerShip(owner=owners[6], car=cars[3], buy_date=datetime.date(2021, 11, 15),\n                  sale_date=datetime.date(2022, 7, 31)),\n    ]\n\n    for ownership in ownerships:\n        ownership.save()\n\n    print(\"\\n\u0421\u043e\u0437\u0434\u0430\u043d\u044b \u043e\u0442\u043d\u043e\u0448\u0435\u043d\u0438\u044f \u0432\u043b\u0430\u0434\u0435\u043d\u0438\u044f:\")\n    for ownership in OwnerShip.objects.all():\n        sale_info = f\" - \u043f\u0440\u043e\u0434\u0430\u0436\u0430: {ownership.sale_date}\" if ownership.sale_date else \" (\u0432 \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0441\u0442\u0438)\"\n        print(\n            f\"  - {ownership.owner.first_name} {ownership.owner.second_name} -&gt; {ownership.car}: \u043f\u043e\u043a\u0443\u043f\u043a\u0430: {ownership.buy_date}{sale_info}\")\n\n    # \u0412\u044b\u0432\u043e\u0434 \u0438\u0442\u043e\u0433\u043e\u0432\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438\n    print(\"\\n\" + \"=\" * 50)\n    print(\"\u0418\u0422\u041e\u0413\u041e\u0412\u0410\u042f \u0421\u0422\u0410\u0422\u0418\u0421\u0422\u0418\u041a\u0410:\")\n    print(f\"\u0412\u0441\u0435\u0433\u043e \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u0435\u0439: {Car.objects.count()}\")\n    print(f\"\u0412\u0441\u0435\u0433\u043e \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435\u0432: {Owner.objects.count()}\")\n    print(f\"\u0412\u0441\u0435\u0433\u043e \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u0435\u043d\u0438\u0439: {License.objects.count()}\")\n    print(f\"\u0412\u0441\u0435\u0433\u043e \u0437\u0430\u043f\u0438\u0441\u0435\u0439 \u043e \u0432\u043b\u0430\u0434\u0435\u043d\u0438\u0438: {OwnerShip.objects.count()}\")\n\n    print(\"\\n\u0410\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u0438 \u043f\u043e \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0430\u043c:\")\n    for owner in Owner.objects.all():\n        cars_count = OwnerShip.objects.filter(owner=owner).count()\n        current_cars = OwnerShip.objects.filter(owner=owner, sale_date__isnull=True)\n        print(\n            f\"  {owner.first_name} {owner.second_name}: {cars_count} \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u0435\u0439, \u0438\u0437 \u043d\u0438\u0445 \u0432 \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0441\u0442\u0438: {current_cars.count()}\")\n\n\nif __name__ == \"__main__\":\n    create_data()\n</code></pre> <p><code>\u0417\u0430\u0434\u0430\u043d\u0438\u0435 \u2116 2:</code></p> <p>\u041f\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u043c \u0432 \u043f\u0440.1 \u0434\u0430\u043d\u043d\u044b\u043c \u043d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u043d\u0430 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044e:</p> <ul> <li>\u0413\u0434\u0435 \u044d\u0442\u043e \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e, \u0434\u043e\u0431\u0430\u0432\u044c\u0442\u0435 related_name \u043a \u043f\u043e\u043b\u044f\u043c \u043c\u043e\u0434\u0435\u043b\u0438</li> <li>\u0412\u044b\u0432\u0435\u0434\u0435\u0442\u0435 \u0432\u0441\u0435 \u043c\u0430\u0448\u0438\u043d\u044b \u043c\u0430\u0440\u043a\u0438 \u201cToyota\u201d (\u0438\u043b\u0438 \u043b\u044e\u0431\u043e\u0439 \u0434\u0440\u0443\u0433\u043e\u0439 \u043c\u0430\u0440\u043a\u0438, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0443 \u0432\u0430\u0441 \u0435\u0441\u0442\u044c)</li> <li>\u041d\u0430\u0439\u0442\u0438 \u0432\u0441\u0435\u0445 \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u0435\u0439 \u0441 \u0438\u043c\u0435\u043d\u0435\u043c \u201c\u041e\u043b\u0435\u0433\u201d (\u0438\u043b\u0438 \u043b\u044e\u0431\u044b\u043c \u0434\u0440\u0443\u0433\u0438\u043c \u0438\u043c\u0435\u043d\u0435\u043c \u043d\u0430 \u0432\u0430\u0448\u0435 \u0443\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u0438\u0435)</li> <li>\u0412\u0437\u044f\u0432 \u043b\u044e\u0431\u043e\u0433\u043e \u0441\u043b\u0443\u0447\u0430\u0439\u043d\u043e\u0433\u043e \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0430 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0435\u0433\u043e id, \u0438 \u043f\u043e \u044d\u0442\u043e\u043c\u0443 id \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u0435\u043d\u0438\u044f \u0432 \u0432\u0438\u0434\u0435 \u043e\u0431\u044a\u0435\u043a\u0442\u0430 \u043c\u043e\u0434\u0435\u043b\u0438 (\u043c\u043e\u0436\u043d\u043e \u0432 2 \u0437\u0430\u043f\u0440\u043e\u0441\u0430)</li> <li>\u0412\u044b\u0432\u0435\u0441\u0442\u0438 \u0432\u0441\u0435\u0445 \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435\u0432 \u043a\u0440\u0430\u0441\u043d\u044b\u0445 \u043c\u0430\u0448\u0438\u043d (\u0438\u043b\u0438 \u043b\u044e\u0431\u043e\u0433\u043e \u0434\u0440\u0443\u0433\u043e\u0433\u043e \u0446\u0432\u0435\u0442\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0443 \u0432\u0430\u0441 \u043f\u0440\u0438\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442)</li> <li> <p>\u041d\u0430\u0439\u0442\u0438 \u0432\u0441\u0435\u0445 \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435\u0432, \u0447\u0435\u0439 \u0433\u043e\u0434 \u0432\u043b\u0430\u0434\u0435\u043d\u0438\u044f \u043c\u0430\u0448\u0438\u043d\u043e\u0439 \u043d\u0430\u0447\u0438\u043d\u0430\u0435\u0442\u0441\u044f \u0441 2010 (\u0438\u043b\u0438 \u043b\u044e\u0431\u043e\u0439 \u0434\u0440\u0443\u0433\u043e\u0439 \u0433\u043e\u0434, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u0440\u0438\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0443 \u0432\u0430\u0441 \u0432 \u0431\u0430\u0437\u0435)</p> </li> <li> <p>\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432</p> </li> </ul> <pre><code># 1. \u041c\u0430\u0448\u0438\u043d\u044b Toyota\nCar.objects.filter(brand=\"Toyota\")\n&lt;QuerySet [&lt;Car: Toyota Camry (A123BC777)&gt;]&gt;\n</code></pre> <pre><code># 2. \u0412\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u044b \u0441 \u0438\u043c\u0435\u043d\u0435\u043c \u0418\u0432\u0430\u043d\nOwner.objects.filter(first_name=\"\u0418\u0432\u0430\u043d\")\n&lt;QuerySet [&lt;Owner: \u0418\u0432\u0430\u043d\u043e\u0432 \u0418\u0432\u0430\u043d 1990-05-15&gt;]&gt;\n</code></pre> <pre><code># 3. \u0423\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u0435\u043d\u0438\u0435 \u0441\u043b\u0443\u0447\u0430\u0439\u043d\u043e\u0433\u043e \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0430\nimport random\nowners = list(Owner.objects.all())\nowner = random.choice(owners)\nLicense.objects.get(owner_id=owner.id)\n&lt;License: \u0421\u043c\u0438\u0440\u043d\u043e\u0432 \u0414\u043c\u0438\u0442\u0440\u0438\u0439 1995-07-30 77EE901234 B 2015-07-05&gt;\n</code></pre> <pre><code># 4. \u0412\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u044b \u043a\u0440\u0430\u0441\u043d\u044b\u0445 \u043c\u0430\u0448\u0438\u043d\n Owner.objects.filter(ownership__car__color=\"Red\").distinct()\n&lt;QuerySet [&lt;Owner: \u041f\u0435\u0442\u0440\u043e\u0432 \u041f\u0435\u0442\u0440 1985-08-22&gt;, &lt;Owner: \u0412\u0430\u0441\u0438\u043b\u044c\u0435\u0432 \u0421\u0435\u0440\u0433\u0435\u0439 1980-12-18&gt;]&gt;\n</code></pre> <pre><code># 5. \u0412\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u044b \u0441 2020 \u0433\u043e\u0434\u0430\nOwner.objects.filter(ownership__buy_date__year__gte=2020).distinct()\n&lt;QuerySet [&lt;Owner: \u0418\u0432\u0430\u043d\u043e\u0432 \u0418\u0432\u0430\u043d 1990-05-15&gt;, &lt;Owner: \u041f\u0435\u0442\u0440\u043e\u0432 \u041f\u0435\u0442\u0440 1985-08-22&gt;, &lt;Owner: \u0421\u0438\u0434\u043e\u0440\u043e\u0432\u0430 \u041c\u0430\u0440\u0438\u044f 1992-03-10&gt;, &lt;Owner: \u041a\u0443\u0437\u043d\u0435\u0446\u043e\u0432 \u0410\u043b\u0435\u043a\u0441\u0435\u0439 1988-11-05&gt;, &lt;Owner: \u0412\u0430\u0441\u0438\u043b\u044c\u0435\u0432 \u0421\u0435\u0440\u0433\u0435\u0439 1980-12-18&gt;, &lt;Owner: \u041d\u0438\u043a\u043e\u043b\u0430\u0435\u0432\u0430 \u041e\u043b\u044c\u0433\u0430 1993-09-25&gt;]&gt;\n</code></pre> <p><code>\u0417\u0430\u0434\u0430\u043d\u0438\u0435 \u2116 3:</code></p> <p>\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b c \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u0435\u043c \u043e\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0445 \u043c\u0435\u0442\u043e\u0434\u043e\u0432:</p> <ul> <li>\u0412\u044b\u0432\u043e\u0434 \u0434\u0430\u0442\u044b \u0432\u044b\u0434\u0430\u0447\u0438 \u0441\u0430\u043c\u043e\u0433\u043e \u0441\u0442\u0430\u0440\u0448\u0435\u0433\u043e \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u0435\u043d\u0438\u044f</li> <li>\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0441\u0430\u043c\u0443\u044e \u043f\u043e\u0437\u0434\u043d\u044e\u044e \u0434\u0430\u0442\u0443 \u0432\u043b\u0430\u0434\u0435\u043d\u0438\u044f \u043c\u0430\u0448\u0438\u043d\u043e\u0439, \u0438\u043c\u0435\u044e\u0449\u0443\u044e \u043a\u0430\u043a\u0443\u044e-\u0442\u043e \u0438\u0437 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0445 \u043c\u043e\u0434\u0435\u043b\u0435\u0439 \u0432 \u0432\u0430\u0448\u0435\u0439 \u0431\u0430\u0437\u0435</li> <li>\u0412\u044b\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0430\u0448\u0438\u043d \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044f</li> <li>\u041f\u043e\u0434\u0441\u0447\u0438\u0442\u0430\u0439\u0442\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0430\u0448\u0438\u043d \u043a\u0430\u0436\u0434\u043e\u0439 \u043c\u0430\u0440\u043a\u0438</li> <li> <p>\u041e\u0442\u0441\u043e\u0440\u0442\u0438\u0440\u0443\u0439\u0442\u0435 \u0432\u0441\u0435\u0445 \u0430\u0432\u0442\u043e\u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435\u0432 \u043f\u043e \u0434\u0430\u0442\u0435 \u0432\u044b\u0434\u0430\u0447\u0438 \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u0435\u043d\u0438\u044f (\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435: \u0447\u0442\u043e\u0431\u044b \u043d\u0435 \u0432\u044b\u0432\u043e\u0434\u0438\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0440\u0430\u0437 \u043e\u0434\u043d\u0438 \u0438 \u0442\u0435 \u0436\u0435 \u0437\u0430\u043f\u0438\u0441\u0438 \u0432\u043e\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435\u0441\u044c \u043c\u0435\u0442\u043e\u0434\u043e\u043c .distinct()</p> </li> <li> <p>\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432</p> </li> </ul> <pre><code># 1. \u0412\u044b\u0432\u043e\u0434 \u0434\u0430\u0442\u044b \u0432\u044b\u0434\u0430\u0447\u0438 \u0441\u0430\u043c\u043e\u0433\u043e \u0441\u0442\u0430\u0440\u0448\u0435\u0433\u043e \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u0435\u043d\u0438\u044f\nfrom django.db.models import Min, Max, Count, Avg\nLicense.objects.aggregate(oldest_date=Min('issue_date'))['oldest_date']\ndatetime.date(2005, 11, 30)\n</code></pre> <pre><code># 2. \u0421\u0430\u043c\u0430\u044f \u043f\u043e\u0437\u0434\u043d\u044f\u044f \u0434\u0430\u0442\u0430 \u0432\u043b\u0430\u0434\u0435\u043d\u0438\u044f \u043c\u0430\u0448\u0438\u043d\u043e\u0439 \u0434\u043b\u044f \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0445 \u043c\u043e\u0434\u0435\u043b\u0435\u0439\nOwnerShip.objects.aggregate(latest_date=Max('buy_date'))['latest_date']\ndatetime.date(2023, 6, 1)\n</code></pre> <pre><code># 3. \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0430\u0448\u0438\u043d \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044f\nowners_with_car_count = Owner.objects.annotate(car_count=Count('ownership'))\nfor owner in owners_with_car_count:\n    print(f\"   {owner.first_name} {owner.second_name}: {owner.car_count} \u043c\u0430\u0448\u0438\u043d(\u044b)\")\n... \n   \u0418\u0432\u0430\u043d \u0418\u0432\u0430\u043d\u043e\u0432: 2 \u043c\u0430\u0448\u0438\u043d(\u044b)\n   \u041f\u0435\u0442\u0440 \u041f\u0435\u0442\u0440\u043e\u0432: 1 \u043c\u0430\u0448\u0438\u043d(\u044b)\n   \u041c\u0430\u0440\u0438\u044f \u0421\u0438\u0434\u043e\u0440\u043e\u0432\u0430: 3 \u043c\u0430\u0448\u0438\u043d(\u044b)\n   \u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041a\u0443\u0437\u043d\u0435\u0446\u043e\u0432: 2 \u043c\u0430\u0448\u0438\u043d(\u044b)\n   \u0414\u043c\u0438\u0442\u0440\u0438\u0439 \u0421\u043c\u0438\u0440\u043d\u043e\u0432: 1 \u043c\u0430\u0448\u0438\u043d(\u044b)\n   \u0421\u0435\u0440\u0433\u0435\u0439 \u0412\u0430\u0441\u0438\u043b\u044c\u0435\u0432: 2 \u043c\u0430\u0448\u0438\u043d(\u044b)\n   \u041e\u043b\u044c\u0433\u0430 \u041d\u0438\u043a\u043e\u043b\u0430\u0435\u0432\u0430: 1 \u043c\u0430\u0448\u0438\u043d(\u044b)\n</code></pre> <pre><code># 4. \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0430\u0448\u0438\u043d \u043f\u043e \u043c\u0430\u0440\u043a\u0430\u043c\nbrands = Car.objects.values('brand').annotate(total=Count('id'))\nfor brand in brands:\n    print(f\"   {brand['brand']}: {brand['total']}\")\n... \n   BMW: 1\n   Ford: 1\n   Honda: 1\n   Hyundai: 1\n   Renault: 1\n   Toyota: 1\n</code></pre> <pre><code># 5. \u0412\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u044b \u043f\u043e \u0434\u0430\u0442\u0435 \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u0435\u043d\u0438\u044f\nowners_sorted = Owner.objects.filter(license__isnull=False).annotate(license_date=Min('license__issue_date')).order_by('license_date').distinct()\nfor owner in owners_sorted:\n    print(f\"   {owner.first_name} {owner.second_name}: {owner.license_date}\")\n... \n   \u0421\u0435\u0440\u0433\u0435\u0439 \u0412\u0430\u0441\u0438\u043b\u044c\u0435\u0432: 2005-11-30\n   \u041f\u0435\u0442\u0440 \u041f\u0435\u0442\u0440\u043e\u0432: 2008-03-15\n   \u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041a\u0443\u0437\u043d\u0435\u0446\u043e\u0432: 2009-01-10\n   \u0418\u0432\u0430\u043d \u0418\u0432\u0430\u043d\u043e\u0432: 2010-06-01\n   \u041c\u0430\u0440\u0438\u044f \u0421\u0438\u0434\u043e\u0440\u043e\u0432\u0430: 2012-09-20\n   \u0414\u043c\u0438\u0442\u0440\u0438\u0439 \u0421\u043c\u0438\u0440\u043d\u043e\u0432: 2015-07-05\n   \u041e\u043b\u044c\u0433\u0430 \u041d\u0438\u043a\u043e\u043b\u0430\u0435\u0432\u0430: 2018-04-12\n</code></pre>"},{"location":"practice/#32","title":"\u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0447\u0430\u0441\u0442\u044c 3.2","text":"<p><code>\u0417\u0430\u0434\u0430\u043d\u0438\u0435 \u2116 1:</code></p> <p>\u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0435\u043d\u0434\u043f\u043e\u0438\u043d\u0442\u044b \u0434\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0438 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430 \u0441\u043a\u0438\u043b\u043e\u0432 \u043c\u0435\u0442\u043e\u0434\u043e\u043c, \u043e\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u043c \u0432 \u043f\u0443\u043d\u043a\u0442\u0435 \u0432\u044b\u0448\u0435.</p> <p>\u0412 <code>serializers.py</code>:</p> <pre><code>from rest_framework import serializers\nfrom .models import *\n\n\nclass SkillSerializer(serializers.ModelSerializer):\n    class Meta:\n        model = Skill\n        fields = \"__all__\"\n\nclass WarriorSerializer(serializers.ModelSerializer):\n    class Meta:\n        model = Warrior\n        fields = \"__all__\"\n</code></pre> <p>\u0412 <code>views.py</code>:</p> <pre><code>from django.shortcuts import render\nfrom rest_framework import status\nfrom rest_framework.response import Response\nfrom rest_framework.views import APIView\n\nfrom .serializers import SkillSerializer, WarriorSerializer\nfrom .models import Warrior, Skill\n\n\n# Create your views here.\nclass WarriorAPIView(APIView):\n    def get(self, request):\n        warriors = Warrior.objects.all()\n        serializer = WarriorSerializer(warriors, many=True)\n        return Response({\"Warriors\": serializer.data})\n\n\n# \u042d\u043d\u0434\u043f\u043e\u0438\u043d\u0442\u044b \u0434\u043b\u044f \u0443\u043c\u0435\u043d\u0438\u0439 (\u0441\u043a\u0438\u043b\u043e\u0432)\nclass SkillAPIView(APIView):\n    # GET - \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0432\u0441\u0435\u0445 \u0441\u043a\u0438\u043b\u043e\u0432\n    def get(self, request):\n        skills = Skill.objects.all()\n        serializer = SkillSerializer(skills, many=True)\n        return Response({\"Skills\": serializer.data})\n\n    # POST - \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043d\u043e\u0432\u043e\u0433\u043e \u0441\u043a\u0438\u043b\u0430\n    def post(self, request):\n        serializer = SkillSerializer(data=request.data)\n        if serializer.is_valid():\n            serializer.save()\n            return Response(serializer.data, status=status.HTTP_201_CREATED)\n        return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)\n</code></pre> <p>\u0412 <code>urls.py</code>:</p> <pre><code>from django.urls import path\nfrom .views import *\n\n\napp_name = \"warriors_app\"\n\n\nurlpatterns = [\n    path('warriors/', WarriorAPIView.as_view(), name='warriors'),\n    path('skills/', SkillAPIView.as_view(), name='skills'),  # \u041d\u043e\u0432\u044b\u0439 \u044d\u043d\u0434\u043f\u043e\u0438\u043d\u0442 \u0434\u043b\u044f \u0441\u043a\u0438\u043b\u043e\u0432\n]\n</code></pre> <p>\u041f\u043e\u043b\u0443\u0447\u0430\u0435\u043c:</p> <p> </p> <p><code>\u0417\u0430\u0434\u0430\u043d\u0438\u0435 \u2116 2:</code></p> <p>\u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0435\u043d\u0434\u043f\u043e\u0438\u043d\u0442\u044b: - \u0412\u044b\u0432\u043e\u0434 \u043f\u043e\u043b\u043d\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u0432\u0441\u0435\u0445 \u0432\u043e\u0439\u043d\u0430\u0445 \u0438 \u0438\u0445 \u043f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u044f\u0445 (\u0432 \u043e\u0434\u043d\u043e\u043c \u0437\u0430\u043f\u0440\u043e\u0441\u0435). - \u0412\u044b\u0432\u043e\u0434 \u043f\u043e\u043b\u043d\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u0432\u0441\u0435\u0445 \u0432\u043e\u0439\u043d\u0430\u0445 \u0438 \u0438\u0445 \u0441\u043a\u0438\u043b\u0430\u0445 (\u0432 \u043e\u0434\u043d\u043e\u043c \u0437\u0430\u043f\u0440\u043e\u0441\u0435). - \u0412\u044b\u0432\u043e\u0434 \u043f\u043e\u043b\u043d\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u0432\u043e\u0439\u043d\u0435 (\u043f\u043e id), \u0435\u0433\u043e \u043f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u044f\u0445 \u0438 \u0441\u043a\u0438\u043b\u0430\u0445. - \u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0432\u043e\u0439\u043d\u0430 \u043f\u043e id. - \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u0432\u043e\u0439\u043d\u0435.</p> <p>\u0412 <code>serializers.py</code>:</p> <pre><code>class ProfessionNestedSerializer(serializers.ModelSerializer):\n    class Meta:\n        model = Profession\n        fields = [\"id\", \"title\", \"description\"]\n\n\nclass SkillNestedSerializer(serializers.ModelSerializer):\n    level = serializers.SerializerMethodField()\n\n    class Meta:\n        model = Skill\n        fields = [\"id\", \"title\", \"level\"]\n\n    def get_level(self, obj):\n        # \u041f\u043e\u043b\u0443\u0447\u0430\u0435\u043c \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u0443\u043c\u0435\u043d\u0438\u044f \u0434\u043b\u044f \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0433\u043e \u0432\u043e\u0438\u043d\u0430\n        warrior = self.context.get('warrior')\n        if warrior:\n            try:\n                skill_of_warrior = SkillOfWarrior.objects.get(warrior=warrior, skill=obj)\n                return skill_of_warrior.level\n            except SkillOfWarrior.DoesNotExist:\n                return None\n        return None\n\n\n# 1. \u0412\u043e\u0438\u043d\u044b \u0441 \u043f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u044f\u043c\u0438\nclass WarriorProfessionSerializer(serializers.ModelSerializer):\n    profession = ProfessionNestedSerializer(read_only=True)\n    race = serializers.CharField(source='get_race_display')\n\n    class Meta:\n        model = Warrior\n        fields = [\"id\", \"name\", \"race\", \"level\", \"profession\"]\n\n\n# 2. \u0412\u043e\u0438\u043d\u044b \u0441\u043e \u0441\u043a\u0438\u043b\u0430\u043c\u0438\nclass WarriorSkillsSerializer(serializers.ModelSerializer):\n    skills = serializers.SerializerMethodField()\n    race = serializers.CharField(source='get_race_display')\n\n    class Meta:\n        model = Warrior\n        fields = [\"id\", \"name\", \"race\", \"level\", \"skills\"]\n\n    def get_skills(self, obj):\n        skills = obj.skill.all()\n        return SkillNestedSerializer(skills, many=True, context={'warrior': obj}).data\n\n\n# 3. \u041f\u043e\u043b\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0432\u043e\u0438\u043d\u0435\nclass WarriorFullSerializer(serializers.ModelSerializer):\n    profession = ProfessionNestedSerializer(read_only=True)\n    skills = serializers.SerializerMethodField()\n    race = serializers.CharField(source='get_race_display')\n\n    class Meta:\n        model = Warrior\n        fields = [\"id\", \"name\", \"race\", \"level\", \"profession\", \"skills\"]\n\n    def get_skills(self, obj):\n        skills = obj.skill.all()\n        return SkillNestedSerializer(skills, many=True, context={'warrior': obj}).data\n\n\n# 4. \u0421\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u0430\u0442\u043e\u0440 \u0434\u043b\u044f \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0432\u043e\u0438\u043d\u0430\nclass WarriorUpdateSerializer(serializers.ModelSerializer):\n    class Meta:\n        model = Warrior\n        fields = [\"name\", \"race\", \"level\", \"profession\"]\n</code></pre> <p>\u0412 <code>views.py</code>:</p> <pre><code># 1. \u0412\u044b\u0432\u043e\u0434 \u0432\u0441\u0435\u0445 \u0432\u043e\u0438\u043d\u043e\u0432 \u0441 \u0438\u0445 \u043f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u044f\u043c\u0438\nclass WarriorProfessionListAPIView(APIView):\n    def get(self, request):\n        warriors = Warrior.objects.select_related('profession').all()\n        serializer = WarriorProfessionSerializer(warriors, many=True)\n        return Response({\n            \"count\": warriors.count(),\n            \"warriors\": serializer.data\n        })\n\n\n# 2. \u0412\u044b\u0432\u043e\u0434 \u0432\u0441\u0435\u0445 \u0432\u043e\u0438\u043d\u043e\u0432 \u0441 \u0438\u0445 \u0441\u043a\u0438\u043b\u0430\u043c\u0438\nclass WarriorSkillsListAPIView(APIView):\n    def get(self, request):\n        warriors = Warrior.objects.prefetch_related('skill').all()\n        serializer = WarriorSkillsSerializer(warriors, many=True)\n        return Response({\n            \"count\": warriors.count(),\n            \"warriors\": serializer.data\n        })\n\n\n# 3. \u0412\u044b\u0432\u043e\u0434 \u043f\u043e\u043b\u043d\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u0432\u043e\u0438\u043d\u0435 \u043f\u043e ID\nclass WarriorDetailAPIView(APIView):\n    def get(self, request, pk):\n        warrior = get_object_or_404(Warrior.objects.prefetch_related('skill'), pk=pk)\n        serializer = WarriorFullSerializer(warrior)\n        return Response(serializer.data)\n\n\n# 4. \u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0432\u043e\u0438\u043d\u0430 \u043f\u043e ID\nclass WarriorDeleteAPIView(APIView):\n    def delete(self, request, pk):\n        warrior = get_object_or_404(Warrior, pk=pk)\n        warrior_name = warrior.name\n        warrior.delete()\n        return Response(\n            {\"message\": f\"\u0412\u043e\u0438\u043d {warrior_name} \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\"},\n            status=status.HTTP_204_NO_CONTENT\n        )\n\n\n# 5. \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u0432\u043e\u0438\u043d\u0435\nclass WarriorUpdateAPIView(APIView):\n    def get(self, request, pk):\n        warrior = get_object_or_404(Warrior, pk=pk)\n        serializer = WarriorFullSerializer(warrior)\n        return Response(serializer.data)\n\n    def put(self, request, pk):\n        warrior = get_object_or_404(Warrior, pk=pk)\n        serializer = WarriorUpdateSerializer(warrior, data=request.data)\n\n        if serializer.is_valid():\n            serializer.save()\n            # \u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u043c \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435\n            updated_warrior = Warrior.objects.get(pk=pk)\n            full_serializer = WarriorFullSerializer(updated_warrior)\n            return Response({\n                \"message\": \"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0432\u043e\u0438\u043d\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0430\",\n                \"warrior\": full_serializer.data\n            })\n\n        return Response(\n            {\"error\": \"\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u0438\", \"details\": serializer.errors},\n            status=status.HTTP_400_BAD_REQUEST\n        )\n\n    def patch(self, request, pk):\n        warrior = get_object_or_404(Warrior, pk=pk)\n        serializer = WarriorUpdateSerializer(warrior, data=request.data, partial=True)\n\n        if serializer.is_valid():\n            serializer.save()\n            # \u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u043c \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435\n            updated_warrior = Warrior.objects.get(pk=pk)\n            full_serializer = WarriorFullSerializer(updated_warrior)\n            return Response({\n                \"message\": \"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0432\u043e\u0438\u043d\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0430\",\n                \"warrior\": full_serializer.data\n            })\n\n        return Response(\n            {\"error\": \"\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u0438\", \"details\": serializer.errors},\n            status=status.HTTP_400_BAD_REQUEST\n        )\n</code></pre> <p>\u0412 <code>urls.py</code>:</p> <pre><code>urlpatterns = [\n    path('warriors/', WarriorAPIView.as_view(), name='warriors'),\n    path('skills/', SkillAPIView.as_view(), name='skills'),\n    path('warriors/professions/', WarriorProfessionListAPIView.as_view(), name='warriors-professions'),\n    path('warriors/skills/', WarriorSkillsListAPIView.as_view(), name='warriors-skills'),\n    path('warriors/&lt;int:pk&gt;/', WarriorDetailAPIView.as_view(), name='warrior-detail'),\n    path('warriors/&lt;int:pk&gt;/delete/', WarriorDeleteAPIView.as_view(), name='warrior-delete'),\n    path('warriors/&lt;int:pk&gt;/update/', WarriorUpdateAPIView.as_view(), name='warrior-update'),\n]\n</code></pre>"}]}