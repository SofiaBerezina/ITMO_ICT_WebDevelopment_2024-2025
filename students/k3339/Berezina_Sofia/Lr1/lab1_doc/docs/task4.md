# Задание № 4. Реализация многопользовательского чата

## Задача
Мне предстояло создать многопользовательский чат с использованием TCP-протокола. Основная сложность заключалась в организации одновременной работы нескольких клиентов и корректной маршрутизации сообщений между ними.

### 1. Реализация серверной части

Сервер я начала с создания TCP-сокета и привязки его к localhost на порту 14901. Использовала бесконечный цикл для постоянного принятия новых подключений. При подключении каждого клиента сервер сразу запрашивает никнейм, отправляя специальное сообщение "nickname".

Для хранения информации о клиентах создала два списка: clients (для сокетов) и nicknames (для ников). Это позволяет сопоставлять каждому соединению соответствующий никнейм.

Самым сложным было организовать обработку сообщений от каждого клиента в отдельных потоках. Для этого создала функцию handle_client, которая в бесконечном цикле принимает сообщения от конкретного клиента и рассылает их всем остальным участникам чата, добавляя имя отправителя.

Важной задачей была обработка отключений клиентов. При возникновении ошибки чтения сообщения сервер удаляет клиента из списков и корректно завершает поток.

### 2. Реализация клиентской части

Клиентская часть начинается с подключения к серверу. Я организовала два параллельных процесса: прием сообщений в отдельном потоке и отправка сообщений в основном потоке.

Для приема сообщений создала функцию recv_msg, которая постоянно ожидает данные от сервера. При получении специального запроса "nickname" клиент запрашивает у пользователя ввод никнейма и отправляет его на сервер. Все остальные сообщения просто выводятся на экран.

Основной цикл клиента отвечает за ввод сообщений с клавиатуры и их отправку на сервер. Простота этой части компенсируется сложностью многопоточной организации приема сообщений.

Самым интересным моментом было тестирование чата с несколькими подключениями. Я запускала несколько экземпляров клиента и наблюдала, как сообщения корректно доставляются всем участникам. Особенно приятно было видеть, что никнеймы правильно отображаются у всех пользователей.